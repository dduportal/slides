= Jenkins configuration vectors

== Direct file System manipulation

[%step]
* classical way to configure a system
* copying/updating files on the file system (JENKINS_HOME)
* Typical Ansible modules.
** copy
** template
** lineinfile
** xml

== File system vector: Pro

* easy/natural for tools like Ansible

== File system vector: Con

* lot of reverse engineering required
* stability of these undocumented configuration is not guaranteed.
** particularly plugins configuration


== Command Line Interfaces
* two types
** REST API
** Jenkins CLI


== REST API

* using HTTP requests to GET, PUT, POST and DELETE data.

[source,bash]
----
curl -X POST "<jekinsURL>/testProject/build" --user jmm:<password|token>
----

== REST API - CSRF protection
* be aware of CSRF protection (should be on, isn't it?)
** session highjacking 
** requires a token or "crumb" when using password
** not required when using an API Token

== REST API

* To learn more:
** https://wiki.jenkins.io/display/JENKINS/Remote+access+API
** https://wiki.jenkins.io/display/JENKINS/Authenticating+scripted+clients

== Jenkins CLI

* Traditional way, via the `jenkins-cli.jar`
* To list the very functions list (dependant of installed plugin):
** view it in "Manage Jenkins -> Jenkins CLI"
** or simply use "help" CLI command.

== Jenkins CLI - Classic

{nbsp} +

[source,bash]
----
java -jar jenkins-cli.jar -http -s $JENKINS_URL -auth $USERNAME:$API_token command ...
----

{nbsp} +

Much better:
[source,bash]
----
java -jar jenkins-cli.jar -http -s $JENKINS_URL -auth @FILE command ...
----

== Jenkins CLI - SSH

== Jenkins CLI - More details

* https://jenkins.io/doc/book/managing/cli/

== Pros & Cons

== Groovy Scripts


== (Jenkins) Configuration as Code
//     What is it ?
//     Pro
//     Con
