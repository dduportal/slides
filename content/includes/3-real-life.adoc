[{invert}]
= And in Real Life?

[.stretch]
image::miracle2.jpg[]

= My opinion

[%step]
* Practice is still "sedimentary config layer"

{nbsp} +

[%step]
* No easy way to solve bootstrapping problem
* Very often requires manual operations 
* Poorly documented / tooled
* Not fit for the volatile K8S world

= **But Cloudbees is actively working on it**

= Bootstrap strategy

[.small]
* see example on *https://github.com/jmMeessen/captains_aws_cjp*

{nbsp} +

[%step]
. Install jenkins configuration file (startup option)
.. JAVA_ARGS -> `-Djenkins.install.runSetupWizard=false`
. Proceed with installation via package manager (`apt-get`)
. Create `init.groovy.d` directory
. Replace the instanceID with know one (`secret.key`)

= Bootstrap strategy (cont.)

[%step]
. Add "init groovy scripts" in directory
[%step]
.. Initial security settings 
.. License loading script
.. Set-URL, JNLP, and SSHD Port configuration scripts
.. Create Cfg-Management user, generate key and load public key
. Restart CJOC to activate scripts
. Use CLI to install plugins
. Use CLI to execute groovy to create Client Master

= Bootstrap strategy (cont.)

[%step]
. Configure Client Master in same principle
.. Add to JAVA_ARGS the connection info
.. Configure security and initial users via init scripts
.. Install default plugins
. Configure JCasC environment
. Copy definition in adequate directory
. Use CLI to force the load of configuration

